<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù† Ø³ÙŠØ±Ø¨Ø­ Ø§Ù„Ù…Ù„ÙŠÙˆÙ† - ECF Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --classic-blue: #000833;
            --highlight-blue: #0033cc;
            --border-color: #3b82f6;
            --gold: #d4af37;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: black;
            background-image: 
                radial-gradient(circle at 50% 100%, #001f3f 0%, black 70%),
                radial-gradient(circle at 50% 0%, #000b1a 0%, black 100%);
            color: white;
            min-height: 100vh;
            margin: 0;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .hex-shape {
            position: relative;
            background: linear-gradient(180deg, #001a4d 0%, #00081a 100%);
            border-top: 2px solid #ffffff;
            border-bottom: 2px solid #ffffff;
            clip-path: polygon(3% 0%, 97% 0%, 100% 50%, 97% 100%, 3% 100%, 0% 50%);
            padding: 10px 40px;
            display: flex;
            align-items: center;
        }

        .question-box {
            width: 90%;
            max-width: 800px;
            min-height: 90px;
            font-size: 1.5rem;
            font-weight: 700;
            text-align: center;
            justify-content: center;
            z-index: 20;
            margin-top: 20px;
            line-height: 1.4;
        }

        .answer-btn {
            width: 100%;
            min-height: 60px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1.15rem;
            color: white;
            z-index: 20;
            display: flex;
            align-items: center;
        }

        .answer-btn:hover:not(:disabled) {
            background: linear-gradient(180deg, #ffcc00 0%, #ff9900 100%);
            color: black;
            border-color: white;
        }

        .answer-btn.thinking {
            background: #ff9900 !important;
            color: black;
            animation: blink 0.5s infinite;
        }

        .answer-btn.correct {
            background: linear-gradient(180deg, #00ff00 0%, #008800 100%) !important;
            color: white;
            border-color: white;
            box-shadow: 0 0 20px #00ff00;
        }

        .answer-btn.wrong {
            background: linear-gradient(180deg, #ff3300 0%, #aa0000 100%) !important;
            color: white;
        }

        @keyframes blink { 50% { opacity: 0.7; } }

        .ans-label {
            color: var(--gold);
            font-weight: 900;
            margin-left: 15px;
            display: flex;
            align-items: center;
        }
        .ans-label::before {
            content: "â—†";
            font-size: 0.8rem;
            margin-left: 8px;
            color: white;
        }

        .prize-ladder-container {
            position: fixed;
            left: 20px;
            top: 55%;
            transform: translateY(-50%);
            background: rgba(0, 5, 20, 0.75);
            padding: 15px 10px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            z-index: 30;
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.9);
            width: 160px;
            backdrop-filter: blur(8px);
        }
        .prize-step { 
            font-size: 0.85rem; 
            color: #ff9900; 
            padding: 3px 10px; 
            display: flex; 
            justify-content: space-between; 
            border-radius: 4px;
            margin: 2px 0;
            transition: transform 0.2s;
        }
        .prize-step.active { background: #ff9900; color: black; font-weight: 900; transform: scale(1.08); }
        .prize-step.checkpoint { color: white; font-weight: 700; border-bottom: 1px solid rgba(255,255,255,0.1); }

        .answers-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px 60px;
            width: 90%;
            max-width: 850px;
            margin-top: 40px;
            position: relative;
            z-index: 25;
        }

        .center-decor {
            position: absolute;
            top: 48%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 300px;
            height: 300px;
            opacity: 0.35;
            pointer-events: none;
            z-index: 1;
            filter: drop-shadow(0 0 30px rgba(0, 85, 255, 0.5));
        }

        .timer-container {
            position: relative;
            width: 80px;
            height: 80px;
            margin-bottom: 10px;
            z-index: 40;
        }
        .timer-circle {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 4px solid var(--gold);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            font-weight: 900;
            background: radial-gradient(circle, #001a4d, black);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.4);
        }
        .timer-urgent {
            color: #ef4444;
            border-color: #ef4444;
            animation: pulse-red 0.5s infinite;
            box-shadow: 0 0 25px rgba(239, 68, 68, 0.6);
        }

        @keyframes pulse-red {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }

        .hidden-answer { opacity: 0; pointer-events: none; }
        .hidden-ui { display: none !important; }

        .certificate-container {
            background: white;
            color: black;
            padding: 40px;
            border: 15px double var(--gold);
            text-align: center;
            max-width: 750px;
            width: 95%;
            position: relative;
            box-shadow: 0 0 60px rgba(255, 215, 0, 0.7);
        }

        @media (max-width: 1280px) {
            .prize-ladder-container { width: 140px; left: 10px; }
        }
        @media (max-width: 1024px) {
            .prize-ladder-container { display: none; }
            .center-decor { width: 220px; height: 220px; top: 45%; }
        }
    </style>
</head>
<body>

    <!-- Header -->
    <div id="game-header" class="w-full max-w-7xl p-6 flex justify-between items-center z-50">
        <div class="flex items-center gap-4">
            <div class="flex items-center gap-4">
                <img src="ecflogo.png" alt="ECF Logo" class="h-14 w-auto drop-shadow-md" onerror="this.style.display='none'">
                <div class="text-3xl font-black italic text-white tracking-tighter">
                    MILLIONAIRE <span class="bg-blue-600 px-3 py-1 rounded not-italic text-sm align-middle border border-blue-400">ECF</span>
                </div>
            </div>
        </div>
        <div class="flex gap-4">
            <button id="btn-5050" onclick="use5050()" class="w-16 h-12 rounded-full border-2 border-white bg-blue-900 font-bold hover:bg-white hover:text-blue-900 shadow-2xl transition-all">50:50</button>
            <button id="btn-audience" onclick="useAudience()" class="w-16 h-12 rounded-full border-2 border-white bg-blue-900 font-bold hover:bg-white hover:text-blue-900 shadow-2xl transition-all">ğŸ“Š</button>
            <button id="btn-call" onclick="useCall()" class="w-16 h-12 rounded-full border-2 border-white bg-blue-900 font-bold hover:bg-white hover:text-blue-900 shadow-2xl transition-all">ğŸ“</button>
        </div>
    </div>

    <!-- Prize Ladder -->
    <div class="prize-ladder-container" id="side-ladder">
        <div class="prize-step checkpoint" id="p-9"><span>10</span> <span>1,000,000</span></div>
        <div class="prize-step" id="p-8"><span>9</span> <span>500,000</span></div>
        <div class="prize-step" id="p-7"><span>8</span> <span>250,000</span></div>
        <div class="prize-step" id="p-6"><span>7</span> <span>125,000</span></div>
        <div class="prize-step checkpoint" id="p-5"><span>6</span> <span>64,000</span></div>
        <div class="prize-step" id="p-4"><span>5</span> <span>32,000</span></div>
        <div class="prize-step" id="p-3"><span>4</span> <span>16,000</span></div>
        <div class="prize-step" id="p-2"><span>3</span> <span>8,000</span></div>
        <div class="prize-step" id="p-1"><span>2</span> <span>4,000</span></div>
        <div class="prize-step active" id="p-0"><span>1</span> <span>2,000</span></div>
    </div>

    <!-- Game UI -->
    <div id="game-ui" class="w-full flex-1 flex flex-col items-center justify-start pt-10 relative pb-20">
        
        <img src="milion.jpg" alt="Millionaire Logo" class="center-decor" onerror="this.style.display='none'">

        <div class="timer-container" id="timer-ui">
            <div class="timer-circle" id="timer-display">30</div>
        </div>

        <div class="w-full flex justify-center mb-6">
            <div id="question-text" class="hex-shape question-box">
                Loading...
            </div>
        </div>

        <div id="answers-grid" class="answers-grid"></div>

        <div id="feedback-msg" class="mt-8 text-2xl font-bold h-10 text-yellow-500 z-30 drop-shadow-2xl"></div>
    </div>

    <!-- Name Entry -->
    <div id="name-screen" class="fixed inset-0 z-[150] flex flex-col items-center justify-center bg-black/95 backdrop-blur-3xl hidden-ui">
        <div class="text-center mb-12">
            <h1 class="text-7xl font-black text-yellow-500 mb-6 drop-shadow-2xl animate-bounce">MABROOOOK! ğŸ†</h1>
            <p class="text-2xl text-blue-200">Ù„Ù‚Ø¯ ÙˆØµÙ„Øª Ù„Ù„Ù…Ù„ÙŠÙˆÙ†! Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù„Ù„Ø´Ù‡Ø§Ø¯Ø©:</p>
        </div>
        <div class="w-full max-w-xl p-12 bg-blue-950/40 rounded-[2.5rem] border-2 border-yellow-500/50 text-center shadow-2xl">
            <input type="text" id="winner-name-input" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¨Ø·Ù„..." class="w-full p-6 rounded-2xl bg-black/50 border-2 border-blue-400 text-white text-center mb-10 focus:outline-none focus:border-yellow-500 text-3xl font-black">
            <button onclick="generateCertificate()" class="w-full bg-gradient-to-r from-yellow-600 to-yellow-400 hover:from-yellow-500 hover:to-yellow-300 text-black py-6 rounded-2xl font-black text-2xl transition-all shadow-2xl active:scale-95">Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</button>
        </div>
    </div>

    <!-- Certificate -->
    <div id="win-modal" class="fixed inset-0 bg-black/98 flex items-center justify-center z-[200] hidden-ui p-6 overflow-y-auto">
        <div class="certificate-container my-10">
            <div class="flex justify-center mb-6">
                <img src="certificat.jpg" alt="Certificate Header" class="max-h-40 w-auto" onerror="this.style.display='none'">
            </div>
            
            <div class="space-y-2 mb-8">
                <h1 class="text-5xl font-black text-yellow-700 tracking-tighter">Ø´Ù‡Ø§Ø¯Ø© ØªÙ‚Ø¯ÙŠØ±</h1>
                <h1 class="text-3xl font-bold text-blue-900 tracking-wide uppercase">Certificat de MÃ©rite</h1>
            </div>

            <p class="text-gray-500 text-lg italic mb-2 font-bold uppercase">Official ECF Millionaire Winner</p>
            
            <div class="my-6">
                <p class="text-xl text-gray-800 font-bold">Ù†Ù‚Ø± Ø¨ÙƒÙ„ ÙØ®Ø± ÙˆØ§Ø¹ØªØ²Ø§Ø² Ø¨Ø£Ù† Ø§Ù„Ø¨Ø·Ù„:</p>
                <p class="text-lg text-gray-600 italic">Nous certifions avec fiertÃ© que le champion :</p>
                
                <h2 id="winner-name-display" class="text-5xl font-black my-6 text-black border-b-4 border-gray-400 inline-block px-14 uppercase tracking-wider leading-tight">USERNAME</h2>
            </div>
            
            <div class="mb-10">
                <p class="text-xl text-gray-800 font-bold">Ù‚Ø¯ Ø§Ø¬ØªØ§Ø² Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù‚Ø¨Ø§Øª ÙˆÙØ§Ø² Ø¨Ø§Ù„Ø¬Ø§Ø¦Ø²Ø© Ø§Ù„ÙƒØ¨Ø±Ù‰:</p>
                <p class="text-lg text-gray-600 italic">A surmontÃ© tous les obstacles et a remportÃ© le Grand Prix :</p>
                <div class="text-7xl font-black text-green-700 mt-4 drop-shadow-sm">1,000,000 $</div>
            </div>
            
            <div class="flex flex-col md:flex-row justify-between mt-12 items-center gap-8 px-10">
                <div class="text-center order-2 md:order-1">
                    <div class="border-t-2 border-black px-8 pt-2">
                        <p class="font-black text-2xl mb-1">Ù…ÙŠÙ†Ø§ Ù…ÙƒØ§Ø±Ù…</p>
                        <p class="font-bold text-xl text-yellow-700">Ø£Ù…ÙŠÙ† Ø§Ù„Ø®Ø¯Ù…Ø©</p>
                    </div>
                    <p class="text-gray-500 text-sm mt-1">Mina Makarem - Responsable de Service</p>
                </div>
                
                <div class="order-1 md:order-2 w-28 h-28 border-4 border-yellow-600 rounded-full flex items-center justify-center opacity-40 rotate-12 scale-110">
                    <span class="text-[10px] font-black text-yellow-800 text-center">OFFICIAL<br>ECF AUTHENTIC<br>SEAL</span>
                </div>
            </div>
            
            <button onclick="location.reload()" class="mt-16 bg-blue-950 hover:bg-black text-white px-14 py-5 rounded-2xl font-black text-xl transition-all shadow-2xl border border-yellow-500/30">Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø© / Nouveau Jeu</button>
        </div>
    </div>

    <!-- Help Modal -->
    <div id="help-modal" class="fixed inset-0 bg-black/85 backdrop-blur-md flex items-center justify-center z-[100] hidden p-6">
        <div class="bg-blue-950 border-4 border-yellow-500 p-12 max-md w-full text-center rounded-[3rem] shadow-2xl">
            <div id="modal-icon" class="text-9xl mb-8"></div>
            <div id="modal-text" class="text-2xl font-bold mb-12 leading-relaxed"></div>
            <button onclick="closeModal()" class="w-full bg-yellow-500 text-black px-10 py-5 rounded-2xl font-black text-xl hover:bg-yellow-400 transition-all shadow-lg">Ø­Ø³Ù†Ø§Ù‹ / D'accord</button>
        </div>
    </div>

    <script>
        const questions = [
            { q: "Ø¹Ø§ØµÙ…Ø© ÙØ±Ù†Ø³Ø§ØŸ", a: ["Ø¨Ø§Ø±ÙŠØ³", "Ø´Ø¨ÙŠÙ† Ø§Ù„ÙƒÙˆÙ…", "Ø§Ù„Ù…Ù†ÙŠØ§", "Ù…Ù†ÙŠØ§ Ø§Ù„Ù‚Ù…Ø­ Ø§Ù„Ø´Ø±Ù‚ÙŠØ©"], c: 0 },
            { q: "Ø£Ø³Ù…Ø§Ø¡ Ø£ÙˆÙ„Ø§Ø¯ Ù…ÙŠÙ†Ø§ Ù…ÙƒØ§Ø±Ù…ØŸ", a: ["Joseph, Celine et Benjamin", "Joseph, Marie-HÃ©lÃ¨ne et Benjamin", "Georges, Benjamin et Marie-HÃ©lÃ¨ne", "Hillary Clinton, Joseph et Benjamin"], c: 1 },
            { q: "Ø§Ù„Ù‡ÙˆØ³ Ø§Ù„Ø«Ø§Ù†ÙŠ ÙÙŠ Ø§Ù„ØªØ³Ø¨Ø­Ø© Ù…Ø£Ø®ÙˆØ° Ù…Ù†:", a: ["ØªØ³Ø¨Ø­Ø© Ù…ÙˆØ³Ù‰", "ØªØ³Ø¨Ø­Ø© Ø§Ù„Ø«Ù„Ø§Ø«Ø© ÙØªÙŠØ©", "Ø§Ù„Ù…Ø²Ù…ÙˆØ± 150", "Ø³ÙØ± Ø§Ù„Ø±Ø¤ÙŠØ§"], c: 1 },
            { q: "ÙÙŠ Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø§Ù„Ù…Ø³ÙŠØ­ÙŠØŒ Ø§Ù„Ø¢Ø¨ ÙˆØ§Ù„Ø§Ø¨Ù† ÙˆØ§Ù„Ø±ÙˆØ­ Ø§Ù„Ù‚Ø¯Ø³:", a: ["Ø«Ù„Ø§Ø«Ø© Ø¢Ù„Ù‡Ø© Ù…Ù†ÙØµÙ„ÙˆÙ†", "Ø¥Ù„Ù‡ ÙˆØ§Ø­Ø¯ ÙÙŠ Ø«Ù„Ø§Ø«Ø© Ø£Ù‚Ø§Ù†ÙŠÙ…", "Ø«Ù„Ø§Ø«Ø© Ø£Ø´Ø®Ø§Øµ Ø¨Ø«Ù„Ø§Ø«Ø© Ø¬ÙˆØ§Ù‡Ø±", "Ø£Ù‚Ø§Ù†ÙŠÙ… Ø¨Ù„Ø§ ÙˆØ­Ø¯Ø© Ø¬ÙˆÙ‡Ø±"], c: 1 },
            { q: "ÙÙŠ Ø£ÙŠ Ù…Ø¬Ù…Ø¹ ØªÙ… Ø±ÙØ¶ Ø¨Ø¯Ø¹Ø© Ø£Ø±ÙŠÙˆØ³ Ø±Ø³Ù…ÙŠÙ‹Ø§ØŸ", a: ["Ù…Ø¬Ù…Ø¹ Ø£ÙØ³Ø³", "Ù…Ø¬Ù…Ø¹ Ø®Ù„Ù‚ÙŠØ¯ÙˆÙ†ÙŠØ©", "Ù…Ø¬Ù…Ø¹ Ù†ÙŠÙ‚ÙŠØ©", "Ù…Ø¬Ù…Ø¹ Ø§Ù„Ù‚Ø³Ø·Ù†Ø·ÙŠÙ†ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠ"], c: 2 },
            { q: "ÙÙŠ Ø£ÙŠ Ù…Ø¯ÙŠÙ†Ø© Ø¨Ø¯Ø£ Ø¨ÙˆÙ„Ø³ Ø±Ø­Ù„ØªÙ‡ Ø§Ù„ØªØ¨Ø´ÙŠØ±ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰ØŸ", a: ["Ø£ÙˆØ±Ø´Ù„ÙŠÙ…", "Ø£Ù†Ø·Ø§ÙƒÙŠØ©", "ÙÙŠÙ„Ø¨ÙŠ", "ÙƒÙˆØ±Ù†Ø«ÙˆØ³"], c: 1 },
            { q: "ÙÙŠ Ø£ÙŠ Ù…ÙƒØ§Ù† Ø­Ù„Ù‘ Ø§Ù„Ø±ÙˆØ­ Ø§Ù„Ù‚Ø¯Ø³ Ø¹Ù„Ù‰ Ø§Ù„ØªÙ„Ø§Ù…ÙŠØ° ÙŠÙˆÙ… Ø§Ù„Ø®Ù…Ø³ÙŠÙ†ØŸ", a: ["Ø¬Ø¨Ù„ Ø§Ù„Ø²ÙŠØªÙˆÙ†", "Ø§Ù„Ø¹Ù„ÙŠØ©", "Ø§Ù„Ù‡ÙŠÙƒÙ„", "Ø¨ÙŠØª Ø³Ù…Ø¹Ø§Ù† Ø¨Ø·Ø±Ø³"], c: 1 },
            { q: "Ø±Ø¬Ù„ Ø¹Ù†Ø¯Ù‡ 3 Ø£ÙˆÙ„Ø§Ø¯. Ù…Ø¬Ù…ÙˆØ¹ Ø£Ø¹Ù…Ø§Ø±Ù‡Ù… 27. Ø¹Ù…Ø± Ø§Ù„Ø§Ø¨Ù† Ø§Ù„Ø£ÙƒØ¨Ø± Ù‡Ùˆ Ø¶Ø¹Ù Ø¹Ù…Ø± Ø£ØµØºØ± Ø§Ø¨Ù†. ÙˆØ¹Ù…Ø± Ø§Ù„Ø§Ø¨Ù† Ø§Ù„Ø£ÙˆØ³Ø· Ù‡Ùˆ Ù…Ø¬Ù…ÙˆØ¹ Ø¹Ù…Ø± Ø§Ù„Ø£ÙƒØ¨Ø± ÙˆØ§Ù„Ø£ØµØºØ± Ù…Ù‚Ø³ÙˆÙ…Ù‹Ø§ Ø¹Ù„Ù‰ 2ØŸ", a: ["6 â€“ 9 â€“ 12", "4 â€“ 8 â€“ 15", "5 â€“ 10 â€“ 12", "3 â€“ 6 â€“ 18"], c: 0 },
            { q: "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ù…Ù„Ùƒ Ø§Ù„Ø°ÙŠ Ø±Ø£Ù‰ ÙƒØªØ§Ø¨Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø§Ø¦Ø· ØªÙ‚ÙˆÙ„ Ø¥Ù† Ù…Ù…Ù„ÙƒØªÙ‡ Ø³ØªØ¤Ø®Ø° Ù…Ù†Ù‡ØŸ", a: ["Ù†Ø¨ÙˆØ®Ø°Ù†ØµØ±", "Ø¯Ø§Ø±ÙŠÙˆØ³", "Ø¨Ù„Ø´Ø§ØµØ±", "ÙƒÙˆØ±Ø´"], c: 2 },
            { q: "IQ: ÙˆØ§Ø­Ø¯ Ù…Ø§Ø´ÙŠ ÙÙŠ Ø§Ù„Ù…Ø·Ø±Ø© ÙˆØ´Ø¹Ø±Ù‡ Ù…Ø¨Ù„Ø´ØŸ", a: ["Ø¹Ø´Ø§Ù† Ù‡Ùˆ Ø£ØµÙ„Ø¹", "Ø¹Ø´Ø§Ù† Ù…Ø¹Ø§Ù‡ Ø´Ù…Ø³ÙŠØ©", "Ø¹Ø´Ø§Ù† Ù„Ø§Ø¨Ø³ ÙƒØ§Ø¨", "Ø¹Ø´Ø§Ù† Ø§Ù„Ù…Ø·Ø±Ø© ÙƒØ§Ù†Øª Ø®ÙÙŠÙØ©"], c: 0 }
        ];

        let currentQ = 0;
        let isProcessing = false;
        let timeLeft = 30;
        let timerInterval;

        function startTimer() {
            clearInterval(timerInterval);
            timeLeft = 30;
            const display = document.getElementById("timer-display");
            display.innerText = timeLeft;
            display.classList.remove("timer-urgent");

            timerInterval = setInterval(() => {
                timeLeft--;
                display.innerText = timeLeft;
                if (timeLeft <= 5) display.classList.add("timer-urgent");
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    handleTimeout();
                }
            }, 1000);
        }

        function handleTimeout() {
            if (isProcessing) return;
            isProcessing = true;
            document.getElementById("feedback-msg").innerHTML = "<span class='text-red-500 animate-pulse'>Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª! Ù„Ù‚Ø¯ Ø®Ø³Ø±Øª..</span>";
            const correctIdx = questions[currentQ].c;
            document.querySelectorAll(".answer-btn")[correctIdx]?.classList.add("correct");
            setTimeout(() => location.reload(), 2000);
        }

        function loadQuestion() {
            if (currentQ >= questions.length) {
                clearInterval(timerInterval);
                showNamePrompt();
                return;
            }
            isProcessing = false;
            const qData = questions[currentQ];
            const qText = document.getElementById("question-text");
            const grid = document.getElementById("answers-grid");
            qText.innerText = qData.q;
            document.getElementById("feedback-msg").innerText = "";
            grid.innerHTML = "";
            qData.a.forEach((ans, idx) => {
                const btn = document.createElement("button");
                btn.className = "hex-shape answer-btn";
                btn.innerHTML = `<span class="ans-label">${idx + 1}</span> <span>${ans}</span>`;
                btn.onclick = () => selectAnswer(idx, btn);
                grid.appendChild(btn);
            });
            document.querySelectorAll('.prize-step').forEach(el => el.classList.remove('active'));
            document.getElementById(`p-${currentQ}`)?.classList.add('active');
            startTimer();
        }

        async function selectAnswer(idx, btn) {
            if (isProcessing) return;
            isProcessing = true;
            clearInterval(timerInterval);
            btn.classList.add("thinking");
            await new Promise(r => setTimeout(r, 1500));
            if (idx === questions[currentQ].c) {
                btn.classList.remove("thinking");
                btn.classList.add("correct");
                playAudio(true);
                setTimeout(() => { currentQ++; loadQuestion(); }, 1500);
            } else {
                btn.classList.remove("thinking");
                btn.classList.add("wrong");
                playAudio(false);
                setTimeout(() => { btn.classList.add("hidden-answer"); isProcessing = false; }, 800);
            }
        }

        function showNamePrompt() {
            document.getElementById('game-ui').classList.add('hidden-ui');
            document.getElementById('game-header').classList.add('hidden-ui');
            document.getElementById('side-ladder').classList.add('hidden-ui');
            document.getElementById('name-screen').classList.remove('hidden-ui');
        }

        function generateCertificate() {
            const input = document.getElementById('winner-name-input');
            document.getElementById('winner-name-display').innerText = (input.value.trim() || "Ø¨Ø·Ù„ ECF").toUpperCase();
            document.getElementById('name-screen').classList.add('hidden-ui');
            document.getElementById('win-modal').classList.remove('hidden-ui');
        }

        function use5050() {
            document.getElementById("btn-5050").disabled = true;
            document.getElementById("btn-5050").classList.add("opacity-30");
            const correctIdx = questions[currentQ].c;
            let count = 0;
            document.querySelectorAll(".answer-btn").forEach((btn, i) => {
                if (i !== correctIdx && count < 2) {
                    btn.classList.add("hidden-answer");
                    count++;
                }
            });
        }

        function useAudience() {
            document.getElementById("btn-audience").disabled = true;
            document.getElementById("btn-audience").classList.add("opacity-30");
            showModal("ğŸ“Š", `ØªØµÙˆÙŠØª Ø§Ù„Ø¬Ù…Ù‡ÙˆØ± ÙŠÙ…ÙŠÙ„ Ø¨Ù†Ø³Ø¨Ø© 96% Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø±Ù‚Ù… (${questions[currentQ].c + 1}) / L'audience suggÃ¨re le numÃ©ro (${questions[currentQ].c + 1})`);
        }

        function useCall() {
            document.getElementById("btn-call").disabled = true;
            document.getElementById("btn-call").classList.add("opacity-30");
            showModal("ğŸ“", `Ù…ÙŠÙ†Ø§ Ù…ÙƒØ§Ø±Ù…: "Ø£Ù†Ø§ Ù…ØªØ£ÙƒØ¯ Ø¥Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ù‡ÙŠ: ${questions[currentQ].a[questions[currentQ].c]}" / Mina Makarem : "Je suis sÃ»r que c'est : ${questions[currentQ].a[questions[currentQ].c]}"`);
        }

        function playAudio(correct) {
            const context = new (window.AudioContext || window.webkitAudioContext)();
            const osc = context.createOscillator();
            const gain = context.createGain();
            osc.connect(gain);
            gain.connect(context.destination);
            osc.frequency.setValueAtTime(correct ? 880 : 220, context.currentTime);
            gain.gain.setValueAtTime(0.05, context.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.0001, context.currentTime + 0.4);
            osc.start();
            osc.stop(context.currentTime + 0.4);
        }

        function showModal(icon, text) {
            document.getElementById("modal-icon").innerText = icon;
            document.getElementById("modal-text").innerText = text;
            document.getElementById("help-modal").classList.remove("hidden");
        }

        function closeModal() {
            document.getElementById("help-modal").classList.add("hidden");
        }

        window.onload = loadQuestion;
    </script>
</body>
</html>
